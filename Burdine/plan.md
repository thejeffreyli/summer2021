# Daily Progress Report

## Week -1 ##
### Wednesday May 19, 2021 ###
- Set up a student intern directory in waggle-sensor/summer2021.
- Wrote this plan file.

### Thursday May 27, 2021 ###
- Read through the onboarding README document [here](https://github.com/waggle-sensor/summer2021/blob/main/getting_started.md)
- Obtained remote access credentials for the LCRC and Waggle projects.
-  Briefly skimmed the `Software_Development_Process_v1.1` document on the Agile Scrum Process drive folder.
    * Will go back and cover the document content in detail on my starting day.
- Learned about the system architecture and contents of the SAGE and Waggle repositories.
- Successfully built the waggle-edge-stack project.
    * Will need to ask some clarification questions regarding the status of `virtual-waggle` versus `waggle-edge-stack`.
- Completed HR paperwork (I9 and other hiring documents).

## Week 0 ##
### Tuesday June 1, 2021 ###
- Completed Pending Workday tasks.
- Attended Day 1 of virtual orientation.
- Finished the following TMS traning modules:
    * SEC152 (OUO Training)
    * HR498  (Ethics Training)
    * HR720  (Employee Conflict of Interest)
    * HR497  (Sexual Harassment Prevention)
    * JHQ100 (Job & Hazard Questionnaire)

- Met with Sean, Nicola, and Scott to discuss project assignments for the summer.
    * (My project assignment is still TBD)

### Wednesday June 2, 2021 ###
- Successfully built and trained the facemask identification 'hello world' waggle plugin from 
[this repository](https://github.com/waggle-sensor/plugin-helloworld-ml).
- Attended Day 2 of virtual orientation.
- Finished the SEC101 (CounterIntelligence Training)
- Spoke with Sean about work on object tracking with OpenCV
- Began [notes on OpenCV Object Tracking](notes/opencv_tracking.pdf)
- Started work on an experimental OpenCV image tracking plugin: [plugin-motion-detector](https://github.com/waggle-sensor/plugin-motion-detector)

### Thursday June 3, 2021 ###
- Completed ESH100 (ES&H Orientation)
- Completed ESH196A (Hazard Communication)
- Read through the [Bolme paper on MOSSE filters](https://www.cs.colostate.edu/~draper/papers/bolme_cvpr10.pdf) for object tracking.
- Did a brief review of FFT (convolution and correlation theorems, as shown [here](http://ugastro.berkeley.edu/infrared/ir_clusters/convolution.pdf)).

### Friday Hune 4, 2021 ###
- Finished notes on MOSSE filters, which can be found [here](notes/opencv_tracking.pdf).
- Read up on the existing (cross-platform?) docs for opencv
    * I'm still a bit confused about the translation between the standard C++ api and the python api. The bindings seem autogenerated, which means that they mimic the C++ api with high fidelity, but there are some packaging quirks that are not well documented (such as their legacy packages).
- Implemented MOSSE filters in the plugin-motion-detection repository.
    * I still need permissions to commit to this repo; I am commiting locally on my machine.

## Week 1 ##
### Monday June 7, 2021 ###
- Wrote some manual logic to handle the detection of occluded objects in `plugin-motion-detector`
- Did some reading on the YOLO model paper
    * The YOLO model seems to yield good results, but may not perform well in a general object detection setting, so custom models may need to be trained to detect "canonical" objects in the deployment setting

    * 
### Tuesday June 8, 2021 ###
- Imported part of the KITTI multi-object tracking dataset for autonomous vehicles
    * This dataset is quite large (and the image aspect ratios are non-standard), so it requires a lot of cleaning.
    * This dataset may serve as a good proof-of-concept for tranferring the YOLO model to a specific use case, given a clean, labeled dataset.

- Obtained push permissions for the `plugin-motion-detector` repository.

### Wednesday June 9, 2021 ###
- Continued work on training YOLO on the KITTI vehicle detection dataset
- Read Farneback's paper on fast dense optical flow

### Thursday June 10, 2021 ###
- Cleaned up the YOLO implementation in `plugin-motion-detector`
    * It would be great to investigate training a custom YOLO model, assuming we have field data to do so.
- Attended CELS lecture

### Friday June 11, 2021 ###
- Met with Sean and Nicola to discuss research progress and answer questions
- Began work on documenting `plugin-motion-detector`
- Began work on my [Introductory Presentation](https://drive.google.com/file/d/16wMCOGvX0aUp60ZUvsId03z5qRBw1jx-/view?usp=sharing).
    * The LaTeX source can be found [here](presentations/project_intro/project_intro.tex).

## Week 2 ##
### Monday June 14, 2021 ###
- Completed and proofread my introductory presentation.
- Attended Weekly Team Meeting
- Attended Intern Presentation Meeting (part I)
- Presented my introductory presentation.
- Caught the end of the Quantum Computing Tutorial (day 1)

### Tuesday June 15, 2021 ###
- Attended CV intern check-in.
- Attended Quantum Computing Tutorial (day 2)
- Began work on PCA-based anomaly detection of static images

### Wednesday June 16, 2021 ###
- Attended SULI EDU Seminar
- Attended Quantum Computing Tutorial (day 3)
- Continued work on PCA-based anomaly detection
    * I have been experimenting with kernel-based PCA, which gives okay results but
      is very memory hungry, as it requires the model to be deployed along with its training       dataset.

### Thursday June 17, 2021 ###
- Attended CV intern check-in.
- Attended Quantum Computing Tutorial (day 4)
- Finished exploration of PCA-based anomaly detection
    * I have concluded that PCA-based anomaly detection only seems to pick up on
      color-based anomalies, and does a poor job of picking up on shape-based anomalies,
      even under the discrete cosine transform (i.e. JPEG-style compression).
    * In order to obtain more robust, non-linear anomaly detection, it might be worthwhile 
      to investigate the use of convolutional autoencoders (CAEs).
- Attended CELS Lecture (featuring Scott Collis!)

### Friday June 18, 2021 ###
- Attended Quantum Computing Tutorial (day 5)
- Download and annotated a "fake" anomaly detection dataset based on the NEON site datasets.
    * The data portal for NEON can be found here:
- Began work on a convolutional autoencoder model for anomaly detection

## Week 3 ##
### Monday June 21, 2021 ###
- Attended Weekly Team Meeting
- Attended Intern Presentation Meeting (part II)
- Continued work on Convolutional Autoencoder
    * Since I built the model in the latest Tensorflow container, I needed to update my Nvidia
      drivers. Since driver updates come with my OS updates, I updated my OS, which messed up
      my GRUB bootloader. Fixing this took a significant chunk out of both my afternoon and my 
      sanity. Just another exciting tale from the *Linux Experience* :)
- Eventually got the model training on my GPU! Woot!

### Tuesday June 22, 2021 ###
- Began generating data for the CAE (using photoshop, etc. to create more anomalies)
- Continued reading papers on the use of CAEs and AAEs to detect anomalies
- Attended CV intern check-in

### Wednesday June 23, 2021 ###
- Began investigating methods for filtering out background noise of convolutional autoencoders.
    * I found a method (using gamma distributions) to better account for differing variations
      in a still-frane image at the per-pixel level. It seems that most of the literature simply
      uses thresholding of the loss function to determine where anomalies exist in the frame.
      This method entails determining a sort-of "per-pixel p-value", which for a specified low
      alpha value (the estimated "likelihood") can be used as a more robust filter to either
      "accept" or "reject" each pixel as anomalous based on the reconstruction loss.
- Attended EDU Weekly Seminar (on how to optimize my LinkedIn profile)
- Attended the "Mid-week CELS social hour"

### Thursday June 24, 2021 ###
- Attended CV intern check-in
- Attended CELS Lecture Series (on classical methods for predictive modeling)
- Finished Neon CAE model and plotted relevant metrics (like ROC curve, AUC, etc.)
    * I may see if it is worthwhile adapting this model into a Waggle plugin.

### Friday June 25, 2021 ###
- Did some recommended reading (some great paper recommendations by Nicola!)
- Pushed anomaly detection notebooks to a [waggle-sensor repository](https://github.com/waggle-sensor/anomaly-detection).
- Began some refactoring work on the motion-detector plugin

## Week 4 ##
### Monday June 28, 2021 ###
- Did some reading on adversarial autoencoders
    * Through this reading, I haven't been convinced that imposing some kind of distribution for image encodings will
      result in better prediction accuracy; this only seems useful for certain tasks like generating adversarial
      examples of anomalies. This might be worth exploring, but I would like to talk to an expert about this first.
- Refactored the [motion detector plugin](https://github.com/waggle-sensor/plugin-motion-detector) to publish data to SAGE.
    * I may want to schedule a code review with Sean to discuss if there need to be changes to the way the plugin
      publishes object data (particularly if we want to support multi-object tracking).

### Tuesday June 29, 2021 ###
- Attended CV intern check-in.
- Began taking notes on online learning methods.
- Began doing some reading on attention-based machine learning models.
    * I found DeepMind's video lecture on [Attention and Memory in Deep Learning](https://www.youtube.com/watch?v=AIiwuClvH6k) to be very informative.

### Wednesday June 30, 2021 ###
- Began implementation of a Variational Autoencoder for anomaly detection.
- Read papers about Convolutional Variational Autoencoders
    * The following paper using guided attention mechanisms seems to be a promising step forward: [Attention-Guided Anomaly Localization in Images (Venkataramanan et al.)](https://arxiv.org/pdf/1911.08616.pdf).
    * The attention mechanism in the paper above is the [Grad-CAM algorithm](https://arxiv.org/pdf/1610.02391.pdf).

### Thursday July 1, 2021 ###
- Began training a Variational Autoencoder on the NEON Dataset
    * I plan on benchmarking this model against the non-variational autoencoder.
- Attended CV intern check-in

### Friday July 2, 2021 ###
- Finished Variational Autoencoder notebook
    * This notebook can be found [here](https://github.com/waggle-sensor/anomaly-detection/blob/main/NEON%20CVAE.ipynb)
    * Unfortunately, the varational autoencoder produced very blurry encoded output, which
      after some investigating in the literature is quite common for VAEs, as they
      can only encode a single independent feature per dimension. One way of addressing
      this problem is the use of GANs, however, I don't think using GANs to fine-tune the
      model would be a good idea, especially if the model is going to be modified to
      train itself. GANs can create instabilities in the model due to feedback loops, which
      I would like to avoid.

## Week 5 ##
### Tuesday July 6, 2021 ###
- Attended CV intern check-in
- Worked on fine-tuning the Attention-based CAE (notebook is [here](https://github.com/waggle-sensor/anomaly-detection/blob/main/NEON%20CAE%20with%20Grad-CAM%20Attention.ipynb))
- Began reading papers on online model training (adaptive learning rate algorithms)

### Wednesday July 7, 2021 ###
- Began work on online simulator for autoencoder models
- Did some "cleaning up" of the motion detector plugin code. 

### Thursday July 8, 2021 ###
- Attended CV intern check-in
- Continued work on online simulator for autoencoder models

### Friday July 9, 2021 ###
- Worked on presentation materials for Monday's intern presentation

## Week 6 ##
### Monday July 12, 2021 ###
- Attended Weekly Team Meeting (mini presentations)
- Attended Waggle/SAGE meeting
    * Presented my slides (links are below):
    * [[Latex Source]]()
    * [[Presentation Slides]]()
- Continued work on online simulator

### Tuesday July 13, 2021 ###
- Attended Waggle/Sage event

### Wednesday July 14, 2021 ###
- Continued work on online simulator
    * Spent most of the morning trying to chase down a division error that was
      giving different predictions in the simulator compared to the original model.
- Began formatting a poster in Latex.

### Thursday July 15, 2021 ###
- Continued work on the online simulator (ran first simulation with a small number of 
  buffered examples):
    * My initial results were not great; the AUC indicated only a slight improvement
      upon random guessing.
    * Increasing the buffer size slightly increases the performance, so I expect that 
      increasing it will eventually cause the results to converge to the model trained
      on the full dataset. I may also experiment with multiple steps per example
    * Another possibility worth exploring is the use of an adaptive gamma filter. I can modify the estimators found in [this paper](https://amstat.tandfonline.com/doi/abs/10.1080/00031305.2016.1209129) to use a moving average sum.

### Friday July 16, 2021 ###
- Ran another simulation (this time with greater buffer size) and obtained slightly larger AUC.
- Began work on implementing an adaptive gamma filter to see if there are any performance gains
- Continued work on my poster.

## Week 7 ##
### Monday July 19, 2021 ###
- Attended Weekly Team Meeting (last of the mini-presentations).
- Attended Waggle/SAGE meeting.
- Continued work on my poster for Learning off the Lawn.
- Did a bit of work on my final report.

### Tuesday July 20, 2021 ###
- Attended Weekly CV intern check-in
- Continued work on running online simulations
    * I have not been getting great results with the simulations, in part due to the fact that
      I'm using a linear queue to buffer training examples, which means that the model is
      "quick to learn but quick to forget", which may not be ideal.
    * I may try to implement a queue structure with exponentially distributed retention times

### Wednesday July 21, 2021 ###
- Continued work on poster and report
- Implemented Exponential Heap Sampler (see comments from previous day)

### Thursday July 22, 2021 ###
- Attended CV intern check-in
- Ran another round of model simulations
    * The exponential heap sampling strategy seems to work wonders! I'm getting results with an
      AUROC only slightly less than the offline training results.

### Friday July 23, 2021 ###
- Finished first draft of poster
- Continued work on final report; added illustrative figures.
- Scheduled a round of simulations for the weekend to explore the effect of adjusting the
  size of the EHS (example buffer)

## Week 8 ##
### Monday July 26, 2021 ###
- Continued work on final report
